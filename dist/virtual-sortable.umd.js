(function(H,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(H=typeof globalThis<"u"?globalThis:H||self,s(H.VirtualSortable={},H.Vue))})(this,(function(H,s){"use strict";const ae={modelValue:{},dataKey:{type:String,default:"",required:!0},scrollbar:{type:Boolean,default:!1},getItemHeight:{type:Function,required:!0},draggable:{type:String,default:'[role="item"]'},sortable:{type:Boolean,default:!0},handle:{type:[Function,String],default:void 0},group:{type:[Object,String],default:void 0},scroller:{type:[Document,HTMLElement],default:void 0},lockAxis:{type:String,default:""},direction:{type:String,default:"vertical"},debounceTime:{type:Number,default:0},throttleTime:{type:Number,default:0},animation:{type:Number,default:150},autoScroll:{type:Boolean,default:!0},scrollThreshold:{type:Number,default:55},disabled:{type:Boolean,default:!1},fallbackOnBody:{type:Boolean,default:!1},delay:{type:Number,default:0},delayOnTouchOnly:{type:Boolean,default:!1},ghostClass:{type:String,default:""},ghostStyle:{type:Object,default:()=>({})},chosenClass:{type:String,default:""},placeholderClass:{type:String,default:""}},ce={dataKey:{type:[String,Number],default:void 0},sizeKey:{type:String,default:"offsetHeight"}};function ue(t,e){return s.getCurrentScope()?(s.onScopeDispose(t,e),!0):!1}const de=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function he(t){return Array.isArray(t)?t:[t]}function fe(t){return s.getCurrentInstance()}function pe(t,e=!0,n){fe()?s.onMounted(t,n):e?t():s.nextTick(t)}const Nt=de?window:void 0;function F(t){var e;const n=s.toValue(t);return(e=n?.$el)!==null&&e!==void 0?e:n}function ge(){const t=s.shallowRef(!1),e=s.getCurrentInstance();return e&&s.onMounted(()=>{t.value=!0},e),t}function me(t){const e=ge();return s.computed(()=>(e.value,!!t()))}function ve(t,e,n={}){const{window:o=Nt,...i}=n;let l;const r=me(()=>o&&"ResizeObserver"in o),a=()=>{l&&(l.disconnect(),l=void 0)},u=s.watch(s.computed(()=>{const h=s.toValue(t);return Array.isArray(h)?h.map(c=>F(c)):[F(h)]}),h=>{if(a(),r.value&&o){l=new ResizeObserver(e);for(const c of h)c&&l.observe(c,i)}},{immediate:!0,flush:"post"}),d=()=>{a(),u()};return ue(d),{isSupported:r,stop:d}}function ye(t,e={width:0,height:0},n={}){const{window:o=Nt,box:i="content-box"}=n,l=s.computed(()=>{var c;return(c=F(t))===null||c===void 0||(c=c.namespaceURI)===null||c===void 0?void 0:c.includes("svg")}),r=s.shallowRef(e.width),a=s.shallowRef(e.height),{stop:u}=ve(t,([c])=>{const f=i==="border-box"?c.borderBoxSize:i==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(o&&l.value){const S=F(t);if(S){const g=S.getBoundingClientRect();r.value=g.width,a.value=g.height}}else if(f){const S=he(f);r.value=S.reduce((g,{inlineSize:E})=>g+E,0),a.value=S.reduce((g,{blockSize:E})=>g+E,0)}else r.value=c.contentRect.width,a.value=c.contentRect.height},n);pe(()=>{const c=F(t);c&&(r.value="offsetWidth"in c?c.offsetWidth:e.width,a.value="offsetHeight"in c?c.offsetHeight:e.height)});const d=s.watch(()=>F(t),c=>{r.value=c?e.width:0,a.value=c?e.height:0});function h(){u(),d()}return{width:r,height:a,stop:h}}function we(t,e){const{containerStyle:n,wrapperProps:o,scrollTo:i,calculateRange:l,currentList:r,containerRef:a}="itemHeight"in e?xe(e,t):Se(e,t);return{list:r,scrollTo:i,containerProps:{ref:a,onScroll:()=>{l()},style:n},wrapperProps:o}}function At(t){const e=s.shallowRef(null),n=ye(e),o=s.ref([]),i=s.shallowRef(t);return{state:s.ref({start:0,end:10}),source:i,currentList:o,size:n,containerRef:e}}function kt(t,e,n){return o=>{if(typeof n=="number")return Math.ceil(o/n);const{start:i=0}=t.value;let l=0,r=0;for(let a=i;a<e.value.length;a++){const u=n(a);if(l+=u,r=a,l>o)break}return r-i}}function Pt(t,e){return n=>{if(typeof e=="number")return Math.floor(n/e)+1;let o=0,i=0;for(let l=0;l<t.value.length;l++){const r=e(l);if(o+=r,o>=n){i=l;break}}return i+1}}function Vt(t,e,n,o,{containerRef:i,state:l,currentList:r,source:a}){return()=>{const u=i.value;if(u){const d=n(t==="vertical"?u.scrollTop:u.scrollLeft),h=o(t==="vertical"?u.clientHeight:u.clientWidth),c=d-e,f=d+h+e;l.value={start:c<0?0:c,end:f>a.value.length?a.value.length:f},r.value=a.value.slice(l.value.start,l.value.end).map((S,g)=>({data:S,index:g+l.value.start}))}}}function Wt(t,e){return n=>typeof t=="number"?n*t:e.value.slice(0,n).reduce((o,i,l)=>o+t(l),0)}function Kt(t,e,n,o){s.watch([t.width,t.height,()=>s.toValue(e),n],()=>{o()})}function $t(t,e){return s.computed(()=>typeof t=="number"?e.value.length*t:e.value.reduce((n,o,i)=>n+t(i),0))}const be={horizontal:"scrollLeft",vertical:"scrollTop"};function zt(t,e,n,o){return i=>{o.value&&(o.value[be[t]]=n(i),e())}}function Se(t,e){const n=At(e),{state:o,source:i,currentList:l,size:r,containerRef:a}=n,u={overflowX:"auto"},{itemWidth:d,overscan:h=5}=t,c=kt(o,i,d),f=Vt("horizontal",h,Pt(i,d),c,n),S=Wt(d,i),g=s.computed(()=>S(o.value.start)),E=$t(d,i);return Kt(r,e,a,f),{scrollTo:zt("horizontal",f,S,a),calculateRange:f,wrapperProps:s.computed(()=>({style:{height:"100%",width:`${E.value-g.value}px`,marginLeft:`${g.value}px`,display:"flex"}})),containerStyle:u,currentList:l,containerRef:a}}function xe(t,e){const n=At(e),{state:o,source:i,currentList:l,size:r,containerRef:a}=n,u={overflowY:"auto"},{itemHeight:d,overscan:h=5}=t,c=kt(o,i,d),f=Vt("vertical",h,Pt(i,d),c,n),S=Wt(d,i),g=s.computed(()=>S(o.value.start)),E=$t(d,i);return Kt(r,e,a,f),{calculateRange:f,scrollTo:zt("vertical",f,S,a),containerStyle:u,wrapperProps:s.computed(()=>({style:{width:"100%",height:`${E.value-g.value}px`,marginTop:`${g.value}px`}})),currentList:l,containerRef:a}}const Yt={capture:!1,passive:!1},Xt=/\s+/g;function rt(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}const ht=rt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Gt=rt(/Edge/i),Ct=rt(/safari/i)&&!rt(/chrome/i)&&!rt(/android/i),jt=(function(){let t=!1;return document.addEventListener("checkIfSupportPassive",null,{get passive(){return t=!0,!0}}),t})();function O(t,e,n){window.addEventListener?t.addEventListener(e,n,jt||!ht?Yt:!1):window.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function M(t,e,n){window.removeEventListener?t.removeEventListener(e,n,jt||!ht?Yt:!1):window.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Ce(t,e){if(!t||!t.getBoundingClientRect)return ft();let n=t;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){let o=b(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll"))return!n.getBoundingClientRect||n===document.body?ft():n}while(n=n.parentNode);return ft()}function ft(){return document.scrollingElement||document.documentElement}function R(t,e,n){if(!t.getBoundingClientRect&&t!==window)return;let o,i,l,r,a,u,d;if(t!==window&&t.parentNode&&t!==ft()?(o=t.getBoundingClientRect(),i=o.top,l=o.left,r=o.bottom,a=o.right,u=o.height,d=o.width):(i=0,l=0,r=window.innerHeight,a=window.innerWidth,u=window.innerHeight,d=window.innerWidth),e&&t!==window){n=n||t.parentNode;do if(n&&n.getBoundingClientRect){let h=n.getBoundingClientRect();i-=h.top+parseInt(b(n,"border-top-width")),l-=h.left+parseInt(b(n,"border-left-width")),r=i+o.height,a=l+o.width;break}while(n=n.parentNode)}return{top:i,left:l,bottom:r,right:a,width:d,height:u}}function lt(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&pt(t,e):pt(t,e))||o&&t===n)return t;if(t===n)break}while(t=t.parentNode);return null}}function Et(t,e){if(!t||!e)return!1;if(e.compareDocumentPosition)return!!(e.compareDocumentPosition(t)&16);if(e.contains&&t.nodeType===1)return e.contains(t)&&e!==t;for(;t=t.parentNode;)if(t===e)return!0;return!1}function Ft(t,e){let n=t.lastElementChild;for(;n&&(n===C.ghost||b(n,"display")==="none"||e);)n=n.previousElementSibling;return n||null}function Y(t,e){if(!t||!t.parentNode)return-1;let n=0;for(;t=t.previousElementSibling;)t!==C.ghost&&t.nodeName.toUpperCase()!=="TEMPLATE"&&b(t,"display")!=="none"&&(!e||pt(t,e))&&n++;return n}function _t(t,e,n,o){let i=0,l=0,r=t.children;for(;i<r.length;){if(r[i]!==C.ghost&&b(r[i],"display")!=="none"&&lt(r[i],n,t,!1)&&r[i]!==C.dragged){if(l===e)return r[i];l++}i++}return null}function Ut(t,e){let n=b(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=_t(t,0,e),l=_t(t,1,e),r=i&&b(i),a=l&&b(l),u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+R(i).width,d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+R(l).width,h=Gt||ht?"cssFloat":"float";if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&r.float&&r.float!=="none"){let c=r.float==="left"?"left":"right";return l&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return i&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||u>=o&&n[h]==="none"||l&&n[h]==="none"&&u+d>o)?"vertical":"horizontal"}function K(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{const o=(" "+t.className+" ").replace(Xt," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(Xt," ")}}function pt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function b(t,e,n){let o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function Ee(t,e){let n="";if(typeof t=="string")n=t;else do{let i=b(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!1);const o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function qt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function _e(t){return t.offsetWidth}function Te(t,e){return t.compareDocumentPosition?t.compareDocumentPosition(e):t.contains?(t!=e&&t.contains(e)&&16)+(t!=e&&e.contains(t)&&8)+(t.sourceIndex>=0&&e.sourceIndex>=0?(t.sourceIndex<e.sourceIndex&&4)+(t.sourceIndex>e.sourceIndex&&2):1):0}function Tt(t,e){const n=Te(t,e);return n===2?1:n===4?-1:0}function gt(t){t.preventDefault!==void 0&&t.cancelable&&t.preventDefault()}function B({sortable:t,name:e,evt:n}){const o=t.options[e];if(typeof o=="function")return o(Object.assign({},n))}function mt(t,...e){return typeof t=="function"?t(...e):t}const N="Sortable"+Date.now();function Zt(t){this.options=t,this.scrollEl=null,this.autoScrollInterval=null}Zt.prototype={nulling(){this.autoScrollInterval&&(clearInterval(this.autoScrollInterval),this.autoScrollInterval=null)},onStarted(){this.nulling(),this.autoScrollInterval=setInterval(this.autoScroll.bind(this))},onMove(t,e,n,o){const i=n?n[N].options:o;if(n&&!i.autoScroll){this.scrollEl=null;return}this.options=i,this.scrollEl=Ce(t),this.moveEvent=e},autoScroll(){let t=this.options,e=this.moveEvent,n=this.scrollEl,o=t.scrollThreshold,i=t.scrollSpeed;if(!n||e.clientX===void 0||e.clientY===void 0)return;const l=R(n);if(!l)return;const{clientX:r,clientY:a}=e,{top:u,right:d,bottom:h,left:c,height:f,width:S}=l;if(a<u||r>d||a>h||r<c)return;const{scrollTop:g,scrollLeft:E,scrollHeight:k,scrollWidth:et}=n;n.scrollLeft+=this.getScrollOffset(r,c,d,o,i.x,E,et,S),n.scrollTop+=this.getScrollOffset(a,u,h,o,i.y,g,k,f)},getScrollOffset(t,e,n,o,i,l,r,a){return l>0&&t>=e&&t<=e+o?Math.max(-1,(t-e)/o-1)*i:l+a<r&&t<=n&&t>=n-o?Math.min(1,(t-n)/o+1)*i:0}};function Qt(t){this.options=t,this.animationStack=[],this.animationCallbackId=null}Qt.prototype={collect(t){if(!t)return;let e=R(t),n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=Math.min(e.right,n),l=Math.min(e.bottom,o),r=Array.prototype.slice.call(t.children),a=[];for(let u=0,d=r.length;u<d;u++){const h=r[u];if(h===C.ghost||b(h,"display")==="none")continue;const c=R(h);if(!(c.bottom<0||c.right<0)){if(a.length===0&&h.previousElementSibling){let f=h.previousElementSibling;do if(f&&f!==C.ghost&&b(f,"display")!=="none")break;while(f=f.previousElementSibling);f&&a.push({el:f,rect:R(f)})}if(c.top-c.height>l||c.left-c.width>i){a.push({el:h,rect:c});break}a.push({el:h,rect:c})}}this.animationStack.push(a)},animate(t){let e=this.animationStack.pop(),n=this.options.animation;if(!e||!n){clearTimeout(this.animationCallbackId),typeof t=="function"&&t();return}let o=0;e.forEach(i=>{let l=0,r=i.el,a=R(r),u=i.rect,d=r.prevToRect,h=r.prevFromRect;if(r.animating&&h&&d&&qt(u,a)){const c=Ee(r);if(c){const f={top:a.top-c.f,left:a.left-c.e},S=Jt(f,a),g=Jt(h,d);l=S/g*n}}qt(u,a)||(r.prevFromRect=u,r.prevToRect=a,l||(l=n),this.execute(r,u,a,l)),l&&(o=Math.max(o,l))}),clearTimeout(this.animationCallbackId),o?this.animationCallbackId=setTimeout(()=>{typeof t=="function"&&t()},o):typeof t=="function"&&t()},execute(t,e,n,o){let i=this.options.easing||"",l=e.left-n.left,r=e.top-n.top;b(t,"transition",""),b(t,"transform",`translate3d(${l}px, ${r}px, 0)`),this.repaintDummy=_e(t),b(t,"transition",`transform ${o}ms ${i}`),b(t,"transform","translate3d(0px, 0px, 0px)"),typeof t.animating=="number"&&clearTimeout(t.animating),t.animating=setTimeout(()=>{b(t,"transition",""),b(t,"transform",""),t.prevFromRect=null,t.prevToRect=null,t.animating=null},o)}};function Jt(t,e){return Math.sqrt(Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2))}let vt=[],X,D,y,w,U,T,m,I,P,_,q,$,st,Z,L,V,Q,A,W,G,J;function te(t){let e={},n=t.group;(!n||typeof n!="object")&&(n={name:n,pull:!0,put:!0,revertDrag:!0}),e.name=n.name,e.pull=n.pull??!0,e.put=n.put??!0,e.revertDrag=n.revertDrag??!0,t.group=e}function Ie(t,e){let n;return vt.reduce((o,i)=>{const l=i[N].options.emptyInsertThreshold;if(l==null)return;const r=R(i),a=t>=r.left-l&&t<=r.right+l,u=e>=r.top-l&&e<=r.bottom+l;return a&&u&&(!n||n&&r.left>=n.left&&r.right<=n.right&&r.top>=n.top&&r.bottom<=n.bottom)&&(o=i,n=r),o},null)}function De(t){const e=V||L;return!(t.clientX!==void 0&&t.clientY!==void 0&&Math.abs(t.clientX-e.clientX)<=0&&Math.abs(t.clientY-e.clientY)<=0)}function C(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw`Sortable-dnd: \`el\` must be an HTMLElement, not ${{}.toString.call(t)}`;t[N]=this,this.el=t,this.options=e=Object.assign({},e);const n={store:null,group:"",handle:null,draggable:">*",sortable:!0,disabled:!1,customGhost:null,lockAxis:"",direction:"",animation:150,easing:"",ghostClass:"",ghostStyle:{},chosenClass:"",placeholderClass:"",autoScroll:!0,scrollThreshold:55,scrollSpeed:{x:10,y:10},delay:0,delayOnTouchOnly:!1,swapOnDrop:!0,removeCloneOnDrop:!0,dropOnAnimationEnd:!1,appendToBody:!1,supportTouch:"ontouchstart"in window,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,emptyInsertThreshold:-1};for(let o in n)!(o in e)&&(e[o]=n[o]);te(e);for(let o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));O(t,e.supportTouch?"touchstart":"mousedown",this._onDrag),this.autoScroller=new Zt(e),this.animator=new Qt(e),vt.push(t)}C.prototype={constructor:C,_onDrag(t){let e=this.el,n=this.options,o=n.handle,i=t.touches&&t.touches[0],l=(i||t).target,r=e.ownerDocument;if(y||n.disabled||!n.group.pull||/mousedown|pointerdown/.test(t.type)&&t.button!==0||Ct&&l&&l.tagName.toUpperCase()==="SELECT")return;const a=lt(l,n.draggable,e);!a||a.animating||(L={event:t,clientX:(i||t).clientX,clientY:(i||t).clientY},y=a,A=i?y:document,O(A,"mouseup",this._onDrop),O(A,"touchend",this._onDrop),O(A,"touchcancel",this._onDrop),!(typeof o=="function"&&!o(t)||typeof o=="string"&&!lt(l,o,y))&&(n.delay&&(!n.delayOnTouchOnly||i)&&!(Gt||ht)?(O(r,"touchmove",this._delayedMoveHandler),O(r,"mousemove",this._delayedMoveHandler),O(r,"mouseup",this._cancelStart),O(r,"touchend",this._cancelStart),O(r,"touchcancel",this._cancelStart),this._dragStartTimer=setTimeout(()=>this._onStart(i,t),n.delay)):this._onStart(i,t)))},_delayedMoveHandler(t){const e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-L.clientX),Math.abs(e.clientY-L.clientY))>=Math.floor(this.options.touchStartThreshold/(window.devicePixelRatio||1))&&this._cancelStart()},_cancelStart(){let t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),M(t,"touchmove",this._delayedMoveHandler),M(t,"mousemove",this._delayedMoveHandler),M(t,"mouseup",this._cancelStart),M(t,"touchend",this._cancelStart),M(t,"touchcancel",this._cancelStart)},_onStart(t,e){gt(e);let n=this.el,o=this.options,i=Y(y);$=i,st=i,Z=i,X=n,D=n,T=n,P=y,_=y.parentNode,q=o.group.pull,G=y,W={to:n,target:y,newIndex:i,relative:0},m=y.cloneNode(!0),C.dragged=y,C.clone=m,C.active=this,B({sortable:this,name:"onChoose",evt:this._getEventProperties(e)}),K(y,o.chosenClass,!0),O(A,t?"touchmove":"mousemove",this._nearestSortable);try{document.selection?setTimeout(()=>document.selection.empty(),0):window.getSelection().removeAllRanges()}catch{}O(document,"selectstart",gt),Ct&&b(document.body,"user-select","none")},_onStarted(){let t=this.options;this.animator.collect(_),this._appendGhost(),K(m,t.chosenClass,!0),K(m,t.placeholderClass,!0),y.parentNode.insertBefore(m,y),b(y,"display","none"),B({sortable:this,name:"onDrag",evt:this._getEventProperties(L.event)}),this.animator.animate(),this.autoScroller.onStarted()},_appendGhost(){if(I)return;let t=this.options;const e=t.appendToBody?document.body:this.el;I=(mt(t.customGhost,m)||m).cloneNode(!0),K(I,t.ghostClass,!0);const o=R(y),i=Object.assign({position:"fixed",top:o.top,left:o.left,width:o.width,height:o.height,margin:0,zIndex:1e5,opacity:"0.8",overflow:"hidden",boxSizing:"border-box",transform:"",transition:"",pointerEvents:"none"},t.ghostStyle);for(let a in i)b(I,a,i[a]);C.ghost=I,e.appendChild(I);const l=(L.clientX-o.left)/parseInt(I.style.width)*100,r=(L.clientY-o.top)/parseInt(I.style.height)*100;b(I,"transform-origin",`${l}% ${r}%`),b(I,"will-change","transform")},_nearestSortable(t){gt(t);let e=t.touches&&t.touches[0],n=e||t;if(!y||!De(n))return;!V&&this._onStarted();let o=this.options.lockAxis,i=o==="x"?L.clientX:n.clientX,l=o==="y"?L.clientY:n.clientY,r=document.elementFromPoint(i,l),a=i-L.clientX,u=l-L.clientY;V={event:t,clientX:i,clientY:l},b(I,"transform",`translate3d(${a}px, ${u}px, 0)`);const d=Ie(i,l);d&&d[N]._onMove(t,r),this.autoScroller.onMove(r,V,d,this.options)},_allowPut(){let t=this.options.group,e=T[N].options.group;return this.el===T?!0:t.put?t.put.join&&t.put.indexOf(e.name)>-1||e.name&&t.name&&e.name===t.name:!1},_getDirection(){let t=this.options.draggable,e=this.options.direction;return e?mt(e,V.event,m,this):Ut(_,t)},_allowSwap(){let t=R(w),e=this._getDirection()==="vertical",n=e?"top":"left",o=e?"bottom":"right",i=w[e?"offsetHeight":"offsetWidth"],l=e?V.clientY:V.clientX,r=l>=t[n]&&l<t[o]-i/2?-1:1,a=_t(_,0,this.options.draggable),u=Ft(_),d=R(a),h=R(u);if(w===_||Et(_,w))return m===a&&l<d[n]?(U=w,!0):m===u&&l>h[o]?(U=w.nextSibling,!0):!1;const c=Tt(m,w);return U=c<0?w.nextSibling:w,Q!==w?(J=r,!0):J!==r?(J=r,r<0?c>0:c<0):!1},_onMove(t,e){let n=this.el,o=this.options;if(!(o.disabled||!this._allowPut())){if(w=lt(e,o.draggable,n),B({sortable:this,name:"onMove",evt:this._getEventProperties(t,{target:w})}),!o.sortable&&n===T){D!==T&&(w=Q=y,J=0,this._onInsert(t));return}if(n!==D&&(e===n||!Ft(n))){w=Q=null,this._onInsert(t);return}if(!(!w||w.animating||Et(w,m)||!this._allowSwap())){if(w===m||U===m){Q=w;return}n!==D?this._onInsert(t):w!==y&&this._onChange(t),Q=w}}},_onInsert(t){let e=this.el,n=w||m,o=q==="clone"&&e!==T&&D===T,i=q==="clone"&&e===T&&D!==T,l=Et(w,document),r=w===y&&!l,a=D[N],u=T[N];X=e,$=Y(m),P=n,_=l?w.parentNode:e,a.animator.collect(m.parentNode),this.animator.collect(_),o&&(W.target=G,W.newIndex=$,W.relative=G===y?0:Tt(m,G),b(y,"display",""),u.options.group.revertDrag||m.parentNode.insertBefore(y,m)),i&&($=Y(y),b(y,"display","none")),b(m,"display",r?"none":""),w&&l?_.insertBefore(m,J<0?w:w.nextSibling):_.appendChild(m),st=r?Z:Y(m),o&&u.options.group.revertDrag&&(W.target=y,W.newIndex=Z,W.relative=0,B({sortable:u,name:"onChange",evt:this._getEventProperties(t,{to:T,target:y,newIndex:Z,revertDrag:!0})})),o||B({sortable:a,name:"onRemove",evt:this._getEventProperties(t,{newIndex:-1})}),i&&n!==y&&(G=n,B({sortable:this,name:"onChange",evt:this._getEventProperties(t,{from:T,backToOrigin:!0})})),i||B({sortable:this,name:"onAdd",evt:this._getEventProperties(t,{oldIndex:-1})}),a.animator.animate(),this.animator.animate(),D=e},_onChange(t){let e=this.el;this.animator.collect(_),$=Y(m),_=w.parentNode,P=w,e===T&&(G=w),_.insertBefore(m,U),st=Y(m),B({sortable:this,name:"onChange",evt:this._getEventProperties(t)}),B({sortable:this,name:"onDragChange",evt:this._getEventProperties(t)}),this.animator.animate(),D=e},_onDrop(t){let e=this.options;if(this._cancelStart(),M(A,"touchmove",this._nearestSortable),M(A,"mousemove",this._nearestSortable),M(A,"mouseup",this._onDrop),M(A,"touchend",this._onDrop),M(A,"touchcancel",this._onDrop),M(document,"selectstart",gt),Ct&&b(document.body,"user-select",""),I&&I.parentNode&&I.parentNode.removeChild(I),T)if(D=T,$=Z,P===m&&(P=y),K(y,e.chosenClass,!1),B({sortable:this,name:"onUnchoose",evt:this._getEventProperties(t)}),V){this.animator.collect(_),K(m,e.chosenClass,!1),K(m,e.placeholderClass,!1);const n=this._getEventProperties(t);!e.dropOnAnimationEnd&&this._onEnd(n),this.animator.animate(()=>{e.dropOnAnimationEnd&&this._onEnd(n)})}else this._nulling();else this._nulling()},_onEnd(t){let e=this.options,n=q==="clone",o=D===X;(!n||o)&&mt(e.swapOnDrop,t)&&_.insertBefore(y,m),(!n||o)&&mt(e.removeCloneOnDrop,t)&&m&&m.parentNode&&m.parentNode.removeChild(m),b(y,"display",""),D!==X&&B({sortable:D[N],name:"onDrop",evt:Object.assign({},t,n?W:{newIndex:-1})}),B({sortable:X[N],name:"onDrop",evt:Object.assign({},t,o?{}:{oldIndex:-1})}),this._nulling()},_getEventProperties(t,e={}){let n={};return n.event=t,n.to=X,n.from=D,n.node=y,n.clone=m,n.target=P,n.oldIndex=$,n.newIndex=st,n.pullMode=q,Object.assign(n,e),n.relative=P===y?0:Tt(m,P),n},_nulling(){X=D=y=w=U=T=m=I=P=_=q=$=st=Z=L=V=Q=A=W=G=J=C.clone=C.ghost=C.active=C.dragged=null,this.autoScroller.nulling()},destroy(){this._cancelStart(),this._nulling(),M(this.el,"touchstart",this._onDrag),M(this.el,"mousedown",this._onDrag);const t=vt.indexOf(this.el);t>-1&&vt.splice(t,1),this.el[N]=this.animator=this.autoScroller=null},option(t,e){if(e===void 0)return this.options[t];this.options[t]=e,this.animator.options[t]=e,this.autoScroller.options[t]=e,t==="group"&&te(this.options)}},C.utils={on:O,off:M,css:b,index:Y,matches:pt,closest:lt,getRect:R,toggleClass:K,detectDirection:Ut},C.get=function(t){return t[N]},C.create=function(t,e){return new C(t,e)};function ee(t,e){let n;const o=function(...i){n||(e<=0?t.apply(this,i):n=setTimeout(()=>{n=null,t.apply(this,i)},e))};return o.cancel=function(){n&&(clearTimeout(n),n=null)},o}function Me(t,e){const n=ee(t,e),o=function(...i){n.cancel(),n.apply(this,i)};return o.cancel=()=>{n.cancel()},o}function tt(t,e){return t===0?t===e:t==e}function He(t,e){return(Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,".").split(".")).reduce((n,o)=>(n||{})[o],t)}const yt=["delay","group","handle","lockAxis","disabled","sortable","draggable","animation","autoScroll","ghostClass","ghostStyle","chosenClass","scrollSpeed","fallbackOnBody","scrollThreshold","delayOnTouchOnly","placeholderClass"];class ne{constructor(e,n){this.el=e,this.options=n,this.rangeChanged=!1,this.installSortable()}destroy(){this.sortable.destroy(),this.rangeChanged=!1}option(e,n){this.options[e]=n,yt.includes(e)&&this.sortable.option(e,n)}installSortable(){const e=yt.reduce((n,o)=>(n[o]=this.options[o],n),{});this.sortable=new C(this.el,{...e,emptyInsertThreshold:0,swapOnDrop:n=>n.from===n.to,removeCloneOnDrop:n=>n.from===n.to,onDrag:n=>this.onDrag(n),onDrop:n=>this.onDrop(n),onDragChange:n=>this.onDragChange(n),onChoose:n=>this.onChoose(n),onUnchoose:n=>this.onUnchoose(n)})}onChoose(e){this.dispatchEvent("onChoose",e)}onUnchoose(e){this.dispatchEvent("onUnchoose",e)}onDrag(e){const n=e.node.getAttribute("data-key"),o=this.getIndex(n),i=this.options.list[o],l=this.options.uniqueKeys[o];this.sortable.option("store",{item:i,key:l,index:o,oldIndex:o}),this.dispatchEvent("onDrag",{item:i,key:l,index:o,event:e})}onDragChange(e){const n=C.get(e.from)?.option("store"),o=n?n.oldIndex:-1,i=n?n.key:null,l=e.target.getAttribute("data-key");let r=this.getIndex(l);const a=this.getIndex(i);if((a<r&&e.relative===-1||a>r&&e.relative===1)&&(r+=e.relative),o===r)return;const u={key:l,oldIndex:o,newIndex:r,event:e,item:this.options.list[r]};this.sortable.option("store").oldIndex=r,this.dispatchEvent("onDragChange",u)}onDrop(e){const{item:n,key:o,index:i}=C.get(e.from)?.option("store"),l=this.options.list,r={key:o,item:n,list:l,event:e,changed:!1,oldList:[...l],oldIndex:i,newIndex:i};e.from===e.to&&e.node===e.target||this.handleDropEvent(e,r,i),this.dispatchEvent("onDrop",r),e.from===this.el&&this.rangeChanged&&C.dragged?.remove(),e.from!==e.to&&C.clone?.remove(),this.rangeChanged=!1}handleDropEvent(e,n,o){const i=e.target.getAttribute("data-key");let l=-1,r=o;e.from===e.to?(r=this.getIndex(n.key),l=this.getIndex(i),(r<l&&e.relative===-1||r>l&&e.relative===1)&&(l+=e.relative),l!==r&&(n.list.splice(r,1),n.list.splice(l,0,n.item))):(e.from===this.el&&(r=this.getIndex(n.key),n.list.splice(r,1)),e.to===this.el&&(r=-1,l=this.getIndex(i),e.relative===0?l=n.list.length:e.relative===1&&(l+=e.relative),n.list.splice(l,0,n.item))),n.changed=e.from!==e.to||l!==r,n.oldIndex=r,n.newIndex=l}getIndex(e){if(e==null)return-1;const{uniqueKeys:n}=this.options;for(let o=0,i=n.length;o<i;o++)if(tt(n[o],e))return o;return-1}dispatchEvent(e,n){const o=this.options[e];o&&o(n)}}const Re=({mounted:t,updated:e,unmounted:n})=>s.defineComponent({props:["vnode"],mounted(){t(this.$el)},onUpdated(){e(this.$el)},onUnmounted(){n(this.$el)},render(o){return o.vnode}}),Oe=s.defineComponent({props:ce,emits:["resize"],setup(t,{emit:e,slots:n}){let o=null;const i=d=>{const h=d?d[t.sizeKey]:0;e("resize",h,t.dataKey)},u=Re({mounted:d=>{typeof ResizeObserver<"u"&&(o=new ResizeObserver(()=>{i(d)}),d&&o.observe(d))},updated:d=>{i(d)},unmounted:()=>{o&&(o.disconnect(),o=null)}});return()=>{const{dataKey:d}=t,[h]=n.default?.()||[];return s.h(u,{key:d,role:"item",vnode:h,"data-key":d},{default:()=>n.default?.()})}}});function oe(t){return s.getCurrentScope()?(s.onScopeDispose(t),!0):!1}function It(t){return typeof t=="function"?t():s.unref(t)}const ie=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=()=>{};function Be(t,e){function n(...o){return new Promise((i,l)=>{Promise.resolve(t(()=>e.apply(this,o),{fn:e,thisArg:this,args:o})).then(i).catch(l)})}return n}function Le(t,e={}){let n,o,i=re;const l=r=>{clearTimeout(r),i(),i=re};return r=>{const a=It(t),u=It(e.maxWait);return n&&l(n),a<=0||u!==void 0&&u<=0?(o&&(l(o),o=null),Promise.resolve(r())):new Promise((d,h)=>{i=e.rejectOnCancel?h:d,u&&!o&&(o=setTimeout(()=>{n&&l(n),o=null,d(r())},u)),n=setTimeout(()=>{o&&l(o),o=null,d(r())},a)})}}function Ne(t){return s.getCurrentInstance()}function Ae(t,e=200,n={}){return Be(Le(e,n),t)}function ke(t,e=!0,n){Ne()?s.onMounted(t,n):e?t():s.nextTick(t)}function le(t){var e;const n=It(t);return(e=n?.$el)!=null?e:n}const Pe=ie?window:void 0,Ve=ie?window.document:void 0;function We(){const t=s.ref(!1),e=s.getCurrentInstance();return e&&s.onMounted(()=>{t.value=!0},e),t}function Ke(t){const e=We();return s.computed(()=>(e.value,!!t()))}function $e(t,e,n={}){const{window:o=Pe,...i}=n;let l;const r=Ke(()=>o&&"ResizeObserver"in o),a=()=>{l&&(l.disconnect(),l=void 0)},u=s.computed(()=>Array.isArray(t)?t.map(c=>le(c)):[le(t)]),d=s.watch(u,c=>{if(a(),r.value&&o){l=new ResizeObserver(e);for(const f of c)f&&l.observe(f,i)}},{immediate:!0,flush:"post"}),h=()=>{a(),d()};return oe(h),{isSupported:r,stop:h}}let ze=0;function Ye(t,e={}){const n=s.ref(!1),{document:o=Ve,immediate:i=!0,manual:l=!1,id:r=`vueuse_styletag_${++ze}`}=e,a=s.ref(t);let u=()=>{};const d=()=>{if(!o)return;const c=o.getElementById(r)||o.createElement("style");c.isConnected||(c.id=r,e.media&&(c.media=e.media),o.head.appendChild(c)),!n.value&&(u=s.watch(a,f=>{c.textContent=f},{immediate:!0}),n.value=!0)},h=()=>{!o||!n.value||(u(),o.head.removeChild(o.getElementById(r)),n.value=!1)};return i&&!l&&ke(d),l||oe(h),{id:r,css:a,unload:h,load:d,isLoaded:s.readonly(n)}}const Xe=(t,e)=>{const n=t.__vccOpts||t;for(const[o,i]of e)n[o]=i;return n};function Ge(t){const{containerEl:e,sliderEl:n,autoHeight:o,performance:i={},maxHeightRatio:l=.9,observeMethod:r="classList"}=t,a=s.ref(!0),u=Ae(nt,100);let d,h="";const c=s.ref(0),f=s.ref(0),S=s.ref(0),g=s.ref({top:0,scrollTop:0,scrollHeight:0,clientHeight:0}),E=s.ref({clientHeight:0}),k=s.computed(()=>!!f.value),et=s.computed(()=>g.value.scrollHeight>g.value.clientHeight),j=s.computed(()=>o?g.value.clientHeight-bt.value:g.value.clientHeight-E.value.clientHeight),wt=s.computed(()=>g.value.scrollHeight-g.value.clientHeight),ct=s.computed(()=>!g.value.clientHeight&&!g.value.scrollHeight?1:Math.max(g.value.clientHeight/g.value.scrollHeight,.05)),bt=s.computed(()=>ct.value>l?0:ct.value*g.value.clientHeight),Dt=s.computed(()=>({willChange:"transform",transform:`translate3d(0,${S.value}px,0)`,height:o?`${bt.value}px`:void 0}));$e(e,()=>ot());function St(v){ut(),f.value=v.clientY-n.value.getBoundingClientRect().top||1,h=getComputedStyle(e.value).scrollBehavior,h==="smooth"&&(e.value.style.scrollBehavior="unset")}function Mt(){e.value.style.scrollBehavior=h,f.value=0,u()}function ut(){a.value=!1}function nt(){k.value||(a.value=!0)}function Ht(v){if(!k.value)return;let x=v.clientY-g.value.top-f.value;x<0?S.value=0:x>=j.value?S.value=j.value:S.value=x,e.value.scrollTo({top:S.value/j.value*wt.value})}function Rt(){k.value||Ot()}function Ot(){cancelAnimationFrame(d),d=requestAnimationFrame(dt)}function dt(){e.value&&(c.value=i.scrollTop?.value??e.value.scrollTop,S.value=c.value/wt.value*j.value)}function xt(v){let x="addEventListener";v==="add"?x="addEventListener":x="removeEventListener",n.value?.[x]("pointerdown",St,{passive:!0}),window[x]("pointermove",Ht,{passive:!0}),window[x]("pointerup",Mt,{passive:!0})}const Bt=new MutationObserver(v=>{(r=="classList"||v.map(x=>x.oldValue).join().includes("height"))&&ot()});function ot(){g.value.top=e.value?.getBoundingClientRect().top??0;const{scrollHeight:v=0,clientHeight:x=0}=e.value||{},{scrollHeight:z,clientHeight:it}=g.value;v!=z&&(g.value.scrollHeight=v,dt()),x!=it&&(g.value.clientHeight=x,dt());const{clientHeight:se=0}=n.value||{};se!=E.value.clientHeight&&(E.value.clientHeight=se)}function Lt(){ut(),setTimeout(()=>{E.value.clientHeight=n.value?.clientHeight??0,nt()},150)}function p(){if(e.value&&n.value){e.value.classList.add("hide-scrollbar"),e.value.addEventListener("scroll",Rt,{passive:!0}),xt("add");const v={};r==="classList"?Object.assign(v,{subtree:!0,childList:!0}):Object.assign(v,{subtree:!0,attributeOldValue:!0,attributeFilter:["style"]}),Bt.observe(e.value,v),setTimeout(()=>{ot()},100),Lt()}else console.error("useScrollBar:","初始化失败!",{containerEl:e,sliderEl:n})}return s.watch(c,()=>{ut(),u()}),{isScrollEnd:a,isDragSlider:k,offsetTop:S,scrollTop:c,scrollable:et,sliderPos:Dt,sliderRollableHeight:j,init:p,modifySliderEventListener:xt,heightRatio:ct}}const je=t=>(s.pushScopeId("data-v-7fd39e51"),t=t(),s.popScopeId(),t),Fe=je(()=>s.createElementVNode("div",{class:"default-slider"},null,-1)),Ue=Xe(s.defineComponent({__name:"ScrollBar",props:{containerEl:null,autoHide:{type:Boolean},autoHeight:{type:Boolean},observeMethod:null,performance:null,maxHeightRatio:{default:.9}},setup(t,{expose:e}){const n=t,o=!!s.useSlots().default,i=s.ref(null),l=s.computed(()=>n.containerEl),r=Ge({containerEl:l,sliderEl:i,autoHeight:o?n.autoHeight:!0,performance:n.performance,observeMethod:n.observeMethod}),{scrollable:a,isScrollEnd:u,sliderPos:d,heightRatio:h}=r,c=s.ref(!1),f=n.autoHide?s.computed(()=>n.maxHeightRatio<h.value?!1:c.value||!u.value):s.computed(()=>n.maxHeightRatio<h.value?!1:a.value),{load:S}=Ye(`.hide-scrollbar {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }`,{id:"styletag_lzc_scrollbar",manual:!0});s.onMounted(()=>{S(),s.nextTick(()=>{r.init()})}),s.onUnmounted(()=>{r.modifySliderEventListener("remove")});function g(){c.value=!0}function E(){c.value=!1}return e({uScrollBarReturn:r}),(k,et)=>(s.openBlock(),s.createBlock(s.Transition,null,{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("div",{ref_key:"sliderRef",ref:i,class:"slider-wrapper",onMouseenter:g,onMouseleave:E,style:s.normalizeStyle(s.unref(d))},[s.renderSlot(k.$slots,"default",{},()=>[Fe],!0)],36),[[s.vShow,s.unref(f)]])]),_:3}))}}),[["__scopeId","data-v-7fd39e51"]]),qe=t=>s.isRef(t)?t.value:t;function at(t,e){return(Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,".").split(".")).reduce((n,o)=>(n||{})[o],t)}const Ze=s.defineComponent({props:ae,emits:["update:modelValue","top","bottom","drag","dragChange","drop","rangeChange"],setup(t,{emit:e,slots:n,expose:o}){const i=s.ref([]),l=s.ref(!1),r=s.ref(null);let a=[],u;const d=s.ref(""),h=s.ref(new Map),{list:c,containerProps:f,wrapperProps:S,scrollTo:g}=we(i,{itemHeight:t.getItemHeight,overscan:30}),E=()=>{a=i.value.map(p=>at(p,t.dataKey)),u?.option("uniqueKeys",a)};function k(){const p=qe(t.modelValue);p&&(i.value=p,E(),u?.option("list",p),e("update:modelValue",p))}s.watch(()=>[t.modelValue],()=>{k()},{deep:!0});const et=p=>{l.value=!0,t.sortable||u.option("autoScroll",!1),e("drag",p)},j=p=>{l.value=!1,u.option("autoScroll",t.autoScroll),p.changed&&e("update:modelValue",p.list),e("drop",p)},wt=p=>{e("dragChange",p)},ct=p=>{d.value=p.node.getAttribute("data-key")},bt=()=>{d.value=""};function Dt(p,v){tt(v,d.value)||h.value.set(v,p)}const St=s.computed(()=>yt.reduce((p,v)=>(p[v]=t[v],p),{}));s.watch(St,(p,v)=>{if(u)for(let x in p)p[x]!==v[x]&&u.option(x,p[x])});function Mt(){u=new ne(f.ref.value,{...St.value,list:i.value,uniqueKeys:a,onDrag:et,onDrop:j,onChoose:ct,onUnchoose:bt,onDragChange:wt})}function ut(p){let v=0;const x=i.value;for(let z=0;z<x.length;z++){const it=at(x[z],t.dataKey);if(it===p)break;v+=h.value.get(it)??t.getItemHeight(z)}return v}function nt(p){g&&g(p)}function Ht(p){if(i.value.findIndex(it=>tt(at(it,t.dataKey),p))===-1)return;const x=f.ref.value;if(!x)return;const z=ut(p);x.scrollTo({top:z,behavior:"smooth"})}function Rt(){nt(i.value.length-1)}function Ot(){nt(0)}function dt(){return{width:f.ref.value?.clientWidth||0,height:f.ref.value?.clientHeight||0}}function xt(){return{width:r.value?.offsetWidth||0,height:r.value?.offsetHeight||0}}function Bt(p){return i.value.findIndex(v=>tt(at(v,t.dataKey),p))}s.onBeforeMount(()=>{k()}),s.onMounted(()=>{Mt()}),o({containerProps:f,wrapperRef:r,getClientSize:dt,getWrapperSize:xt,getIndexByKey:Bt,scrollToKey:Ht,scrollToBottom:Rt,scrollToTop:Ot,scrollToIndex:nt});const ot=s.ref(0),Lt=p=>{ot.value=p.target.scrollTop;const v=p.target;v.scrollHeight-v.scrollTop===v.clientHeight?e("bottom"):v.scrollTop===0&&e("top")};return()=>s.createVNode("div",null,[s.createVNode("div",s.mergeProps(f,{style:{position:"absolute",width:"100%",height:"100%"},onScroll:Lt}),[s.createVNode("div",s.mergeProps({ref:r},S.value),[c.value.map(p=>{const v=at(p.data,t.dataKey),x=l.value&&tt(v,d.value);return s.createVNode(Oe,{key:v,dataKey:v,style:{display:x?"none":"flex"},sizeKey:"offsetHeight",onResize:Dt},{default:()=>n.item?.({item:p.data,index:p.index})})})])]),t.scrollbar&&s.createVNode(Ue,{"scroll-top":ot.value,containerEl:f.ref.value},null)])}});H.Sortable=ne,H.SortableAttrs=yt,H.debounce=Me,H.default=Ze,H.getDataKey=He,H.isSameValue=tt,H.throttle=ee,Object.defineProperties(H,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
